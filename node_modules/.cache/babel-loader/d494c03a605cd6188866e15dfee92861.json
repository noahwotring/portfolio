{"ast":null,"code":"import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyBXlXcnnyTOWmI4SfdWPkpDOv6xfTlzG_0\",\n  authDomain: \"userdatabasepractice.firebaseapp.com\",\n  databaseURL: \"https://userdatabasepractice.firebaseio.com\",\n  projectId: \"userdatabasepractice\",\n  storageBucket: \"userdatabasepractice.appspot.com\",\n  messagingSenderId: \"418266214563\",\n  appId: \"1:418266214563:web:eb5e2878b6545093240f16\",\n  measurementId: \"G-B8CY4W80BN\"\n};\nfirebase.initializeApp(firebaseConfig);\nconst provider = new firebase.auth.GoogleAuthProvider();\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nexport default firebase;\nexport const session = firebase.auth.Auth.Persistence.SESSION;\nexport const local = firebase.auth.Auth.Persistence.LOCAL;\nexport const generateUserDocument = async (user, additionalData) => {\n  if (!user) return;\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n\n  if (!snapshot.exists) {\n    const {\n      email,\n      displayName,\n      photoURL\n    } = user;\n\n    try {\n      await userRef.set({\n        user,\n        email,\n        photoURL,\n        ...additionalData\n      });\n      console.log(displayName);\n    } catch (error) {\n      console.error(\"Error creating user document\", error);\n    }\n  }\n\n  return getUserDocument(user.uid);\n};\nexport const getUserDocument = async uid => {\n  if (!uid) return null;\n\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n    return {\n      uid,\n      ...userDocument.data()\n    };\n  } catch (error) {\n    console.error(\"Error fetching data\", error);\n  }\n};\n\nconst generateNewsPosts = async (justOwned = false) => {\n  let collectedPosts = [];\n\n  if (justOwned) {\n    const postsRef = firestore.collection('posts').where('owner_id', '==', `${user.uid}`);\n    const snapshot = await userPostsRef.get();\n  } else {\n    const postsRef = firestore.collection('posts');\n    const snapshot = await postsRef.get();\n  }\n\n  try {\n    const userPosts = await postsRef.get();\n    userPosts.forEach(doc => {\n      collectedPosts.push({\n        title: doc.data().title,\n        body: doc.data().body,\n        owner_id: doc.data().owner_id,\n        owner: doc.data().owner,\n        date: doc.data().date_created,\n        id: doc.id\n      });\n    });\n    collectedPosts.forEach(doc => console.log(doc));\n    checkPosts(collectedPosts.sort(function (a, b) {\n      return b.id - a.id;\n    }));\n  } catch (error) {\n    console.error(\"Error fetching data\", error);\n  }\n};\n\nexport const updateUserProfilePicture = async (uid, picURL) => {\n  if (!uid) return null;\n  console.log(\"successfull\");\n  const userRef = await firestore.doc(`users/${uid}`).update({\n    photoURL: picURL\n  });\n};\nexport const updateUserDisplayName = async (uid, newDisplayName) => {\n  if (!uid) return null;\n  console.log(\"success\");\n  const userRef = await firestore.doc(`users/${uid}`).update({\n    displayName: newDisplayName\n  });\n};","map":{"version":3,"sources":["C:/Users/Noah Wotring/Desktop/Code/ReactUserDataPractice/my-app/src/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","provider","auth","GoogleAuthProvider","signInWithGoogle","signInWithPopup","firestore","session","Auth","Persistence","SESSION","local","LOCAL","generateUserDocument","user","additionalData","userRef","doc","uid","snapshot","get","exists","email","displayName","photoURL","set","console","log","error","getUserDocument","userDocument","data","generateNewsPosts","justOwned","collectedPosts","postsRef","collection","where","userPostsRef","userPosts","forEach","push","title","body","owner_id","owner","date","date_created","id","checkPosts","sort","a","b","updateUserProfilePicture","picURL","update","updateUserDisplayName","newDisplayName"],"mappings":"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","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyBXlXcnnyTOWmI4SfdWPkpDOv6xfTlzG_0\",\r\n    authDomain: \"userdatabasepractice.firebaseapp.com\",\r\n    databaseURL: \"https://userdatabasepractice.firebaseio.com\",\r\n    projectId: \"userdatabasepractice\",\r\n    storageBucket: \"userdatabasepractice.appspot.com\",\r\n    messagingSenderId: \"418266214563\",\r\n    appId: \"1:418266214563:web:eb5e2878b6545093240f16\",\r\n    measurementId: \"G-B8CY4W80BN\"\r\n  };\r\nfirebase.initializeApp(firebaseConfig);\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nexport const signInWithGoogle = () => {\r\n  auth.signInWithPopup(provider);\r\n};\r\n\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\nexport default  firebase;\r\nexport const session = firebase.auth.Auth.Persistence.SESSION;\r\nexport const local  = firebase.auth.Auth.Persistence.LOCAL;\r\n\r\nexport const generateUserDocument = async (user,additionalData) => {\r\n    if(!user) return;\r\n    const userRef = firestore.doc(`users/${user.uid}`);\r\n    const snapshot = await userRef.get();\r\n    if(!snapshot.exists) {\r\n      const {email,displayName,photoURL} = user;\r\n      try {\r\n        await userRef.set({\r\n          user,\r\n          email,\r\n          photoURL,\r\n          ...additionalData\r\n        });\r\n        console.log(displayName);\r\n      } catch (error) {\r\n        console.error(\"Error creating user document\", error);\r\n      }\r\n    }\r\n    return getUserDocument(user.uid);\r\n  };\r\n  export const getUserDocument = async uid => {\r\n    if(!uid) return null;\r\n    try {\r\n      const userDocument = await firestore.doc(`users/${uid}`).get();\r\n      return {\r\n        uid,\r\n        ...userDocument.data()\r\n    };\r\n    } catch (error) {\r\n      console.error(\"Error fetching data\", error)\r\n    }\r\n  };\r\n\r\n  const generateNewsPosts = async (justOwned = false) => {\r\n    let collectedPosts = [];\r\n    if(justOwned){\r\n      const postsRef = firestore.collection('posts').where('owner_id','==', `${user.uid}`);\r\n      const snapshot = await userPostsRef.get();\r\n    }\r\n    else {\r\n      const postsRef = firestore.collection('posts');\r\n      const snapshot = await postsRef.get();\r\n    }\r\n\r\n    try {\r\n      const userPosts = await postsRef.get();\r\n      userPosts.forEach(doc => {\r\n        collectedPosts.push({title: doc.data().title,\r\n                              body: doc.data().body,\r\n                              owner_id: doc.data().owner_id,\r\n                              owner : doc.data().owner,\r\n                              date: doc.data().date_created,\r\n                              id: doc.id\r\n                            })\r\n      });\r\n      collectedPosts.forEach((doc) => console.log(doc));\r\n      checkPosts(collectedPosts.sort(function(a,b){return b.id-a.id}));\r\n      } catch (error) {\r\n        console.error(\"Error fetching data\", error)\r\n      }\r\n    }\r\n\r\n  export const updateUserProfilePicture = async (uid,picURL) => {\r\n    if(!uid) return null;\r\n    console.log(\"successfull\");\r\n    const userRef = await firestore.doc(`users/${uid}`).update({photoURL:picURL});\r\n  }\r\n  export const updateUserDisplayName = async (uid,newDisplayName) => {\r\n    if(!uid) return null;\r\n    console.log(\"success\");\r\n    const userRef = await firestore.doc(`users/${uid}`).update({displayName: newDisplayName});\r\n  }\r\n"]},"metadata":{},"sourceType":"module"}