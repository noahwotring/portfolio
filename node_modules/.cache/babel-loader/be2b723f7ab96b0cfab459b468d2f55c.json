{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import firebase from\"firebase/app\";import\"firebase/auth\";import\"firebase/firestore\";var firebaseConfig={apiKey:\"AIzaSyBXlXcnnyTOWmI4SfdWPkpDOv6xfTlzG_0\",authDomain:\"userdatabasepractice.firebaseapp.com\",databaseURL:\"https://userdatabasepractice.firebaseio.com\",projectId:\"userdatabasepractice\",storageBucket:\"userdatabasepractice.appspot.com\",messagingSenderId:\"418266214563\",appId:\"1:418266214563:web:eb5e2878b6545093240f16\",measurementId:\"G-B8CY4W80BN\"};firebase.initializeApp(firebaseConfig);var provider=new firebase.auth.GoogleAuthProvider();export var signInWithGoogle=function signInWithGoogle(){auth.signInWithPopup(provider);};export var auth=firebase.auth();export var firestore=firebase.firestore();export default firebase;export var session=firebase.auth.Auth.Persistence.SESSION;export var local=firebase.auth.Auth.Persistence.LOCAL;export var generateUserDocument=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user,additionalData){var userObj,userRef,snapshot,email,password,displayName,photoURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userObj=_objectSpread({},additionalData);if(user){_context.next=3;break;}return _context.abrupt(\"return\");case 3:userRef=firestore.doc(\"users/\".concat(user.uid));_context.next=6;return userRef.get();case 6:snapshot=_context.sent;if(snapshot.exists){_context.next=18;break;}email=userObj.email,password=userObj.password,displayName=userObj.displayName,photoURL=userObj.photoURL;_context.prev=9;console.log(additionalData.displayName);_context.next=13;return userRef.set(_objectSpread({},additionalData));case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](9);console.error(\"Error creating user document\",_context.t0);case 18:return _context.abrupt(\"return\",getUserDocument(user.uid));case 19:case\"end\":return _context.stop();}}},_callee,null,[[9,15]]);}));return function generateUserDocument(_x,_x2){return _ref.apply(this,arguments);};}();export var getUserDocument=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(uid){var userDocument;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(uid){_context2.next=2;break;}return _context2.abrupt(\"return\",null);case 2:_context2.prev=2;_context2.next=5;return firestore.doc(\"users/\".concat(uid)).get();case 5:userDocument=_context2.sent;console.log(userDocument.data());return _context2.abrupt(\"return\",_objectSpread({uid:uid},userDocument.data()));case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.error(\"Error fetching data\",_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function getUserDocument(_x3){return _ref2.apply(this,arguments);};}();export var getAllUsers=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var usersRef,userNames,userQuery;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return firestore.collection('users');case 2:usersRef=_context3.sent;userNames=[];_context3.prev=4;_context3.next=7;return usersRef.get();case 7:userQuery=_context3.sent;userQuery.forEach(function(doc){userNames.push(doc.data().displayName);});return _context3.abrupt(\"return\",userNames);case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](4);console.log(_context3.t0);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[4,12]]);}));return function getAllUsers(){return _ref3.apply(this,arguments);};}();export var generateNonUserPage=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(userName){var usersRef,queryRef,pageOwnerDoc;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return firestore.collection(\"users\");case 2:usersRef=_context4.sent;_context4.prev=3;_context4.next=6;return usersRef.where('displayName','==',\"\".concat(userName)).get();case 6:queryRef=_context4.sent;queryRef.forEach(function(doc){pageOwnerDoc={displayName:doc.data().displayName,interests:doc.data().interests,aboutMe:doc.data().aboutMe,photoURL:doc.data().photoURL,email:doc.data().email};});return _context4.abrupt(\"return\",pageOwnerDoc);case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](3);console.log(_context4.t0);case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[3,11]]);}));return function generateNonUserPage(_x4){return _ref4.apply(this,arguments);};}();// generating posts\nexport var generateNewsPosts=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var justOwned,collectedPosts,postsRef,userPosts,_args5=arguments;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:justOwned=_args5.length>0&&_args5[0]!==undefined?_args5[0]:false;collectedPosts=[];postsRef=firestore.collection('posts');_context5.prev=3;_context5.next=6;return postsRef.get();case 6:userPosts=_context5.sent;userPosts.forEach(function(doc){collectedPosts.push({title:doc.data().title,body:doc.data().body,owner_id:doc.data().owner_id,owner:doc.data().owner,date_created:doc.data().date_created,id:doc.id});});return _context5.abrupt(\"return\",collectedPosts);case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](3);console.error(\"Error fetching data\",_context5.t0);case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[3,11]]);}));return function generateNewsPosts(){return _ref5.apply(this,arguments);};}();export var generateScore=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var allScores,scoresRef,scores;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:allScores=[];scoresRef=firestore.collection('scores');_context6.prev=2;_context6.next=5;return scoresRef.get();case 5:scores=_context6.sent;scores.forEach(function(sc){allScores.push({score:sc.data().score,uid:sc.data().uid});});return _context6.abrupt(\"return\",allScores);case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](2);console.log(_context6.t0);case 13:case\"end\":return _context6.stop();}}},_callee6,null,[[2,10]]);}));return function generateScore(){return _ref6.apply(this,arguments);};}();export var updateUserInterests=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(uid,interest){var userRef;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(uid){_context7.next=2;break;}return _context7.abrupt(\"return\",null);case 2:_context7.next=4;return firestore.doc(\"users/\".concat(uid)).update({interests:_toConsumableArray(interest)});case 4:userRef=_context7.sent;case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function updateUserInterests(_x5,_x6){return _ref7.apply(this,arguments);};}();export var updateUserProfilePicture=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(uid,picURL){var userRef;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(uid){_context8.next=2;break;}return _context8.abrupt(\"return\",null);case 2:console.log(uid);_context8.prev=3;_context8.next=6;return firestore.doc(\"users/\".concat(uid)).update({photoURL:picURL});case 6:userRef=_context8.sent;_context8.next=12;break;case 9:_context8.prev=9;_context8.t0=_context8[\"catch\"](3);console.log(_context8.t0);case 12:case\"end\":return _context8.stop();}}},_callee8,null,[[3,9]]);}));return function updateUserProfilePicture(_x7,_x8){return _ref8.apply(this,arguments);};}();export var updateUserRep=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(uid,rep){var userRef;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(uid){_context9.next=2;break;}return _context9.abrupt(\"return\",null);case 2:console.log('success');_context9.next=5;return firestore.doc(\"users/\".concat(uid)).update({rep:rep});case 5:userRef=_context9.sent;case 6:case\"end\":return _context9.stop();}}},_callee9);}));return function updateUserRep(_x9,_x10){return _ref9.apply(this,arguments);};}();export var updateUserDisplayName=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(uid,newDisplayName){var userRef;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(uid){_context10.next=2;break;}return _context10.abrupt(\"return\",null);case 2:console.log(\"success\");_context10.next=5;return firestore.doc(\"users/\".concat(uid)).update({displayName:newDisplayName});case 5:userRef=_context10.sent;case 6:case\"end\":return _context10.stop();}}},_callee10);}));return function updateUserDisplayName(_x11,_x12){return _ref10.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/Users/Noah Wotring/Desktop/Code/portfolio/src/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","provider","auth","GoogleAuthProvider","signInWithGoogle","signInWithPopup","firestore","session","Auth","Persistence","SESSION","local","LOCAL","generateUserDocument","user","additionalData","userObj","userRef","doc","uid","get","snapshot","exists","email","password","displayName","photoURL","console","log","set","error","getUserDocument","userDocument","data","getAllUsers","collection","usersRef","userNames","userQuery","forEach","push","generateNonUserPage","userName","where","queryRef","pageOwnerDoc","interests","aboutMe","generateNewsPosts","justOwned","collectedPosts","postsRef","userPosts","title","body","owner_id","owner","date_created","id","generateScore","allScores","scoresRef","scores","sc","score","updateUserInterests","interest","update","updateUserProfilePicture","picURL","updateUserRep","rep","updateUserDisplayName","newDisplayName"],"mappings":"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","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyBXlXcnnyTOWmI4SfdWPkpDOv6xfTlzG_0\",\r\n    authDomain: \"userdatabasepractice.firebaseapp.com\",\r\n    databaseURL: \"https://userdatabasepractice.firebaseio.com\",\r\n    projectId: \"userdatabasepractice\",\r\n    storageBucket: \"userdatabasepractice.appspot.com\",\r\n    messagingSenderId: \"418266214563\",\r\n    appId: \"1:418266214563:web:eb5e2878b6545093240f16\",\r\n    measurementId: \"G-B8CY4W80BN\"\r\n  };\r\nfirebase.initializeApp(firebaseConfig);\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nexport const signInWithGoogle = () => {\r\n  auth.signInWithPopup(provider);\r\n};\r\n\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\nexport default  firebase;\r\nexport const session = firebase.auth.Auth.Persistence.SESSION;\r\nexport const local  = firebase.auth.Auth.Persistence.LOCAL;\r\n\r\nexport const generateUserDocument = async (user,additionalData) => {\r\n    const userObj = {\r\n      ...additionalData\r\n    }\r\n    if(!user) return;\r\n    const userRef = firestore.doc(`users/${user.uid}`);\r\n    const snapshot = await userRef.get();\r\n    if(!snapshot.exists) {\r\n      const {email,password,displayName,photoURL} = userObj;\r\n      try {\r\n        console.log(additionalData.displayName);\r\n\r\n        await userRef.set({\r\n\r\n\r\n          ...additionalData\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error creating user document\", error);\r\n      }\r\n    }\r\n    return getUserDocument(user.uid);\r\n  };\r\n  export const getUserDocument = async uid => {\r\n    if(!uid) return null;\r\n    try {\r\n\r\n      const userDocument = await firestore.doc(`users/${uid}`).get();\r\n      console.log(userDocument.data())\r\n      return {\r\n        uid,\r\n        ...userDocument.data()\r\n    };\r\n    } catch (error) {\r\n      console.error(\"Error fetching data\", error)\r\n    }\r\n  };\r\n  export const getAllUsers = async () => {\r\n    const usersRef = await firestore.collection('users');\r\n    let userNames = [];\r\n    try {\r\n      const userQuery = await usersRef.get();\r\n      userQuery.forEach(doc => {\r\n        userNames.push(doc.data().displayName)\r\n      })\r\n      return userNames\r\n    }\r\n    catch(e){\r\n      console.log(e);\r\n    }\r\n  }\r\n  export const generateNonUserPage = async (userName) => {\r\n    const usersRef = await firestore.collection(`users`);\r\n    try {\r\n\r\n      const queryRef = await usersRef.where('displayName', '==', `${userName}`).get();\r\n\r\n      let pageOwnerDoc;\r\n      queryRef.forEach(doc => {\r\n        pageOwnerDoc = {\r\n          displayName: doc.data().displayName,\r\n          interests: doc.data().interests,\r\n          aboutMe: doc.data().aboutMe,\r\n          photoURL: doc.data().photoURL,\r\n          email: doc.data().email\r\n\r\n        }\r\n      })\r\n\r\n      return pageOwnerDoc\r\n    }catch(e){\r\n      console.log(e);\r\n    }\r\n\r\n\r\n  }\r\n  // generating posts\r\n\r\n  export const generateNewsPosts = async (justOwned = false) => {\r\n    let collectedPosts = [];\r\n    const postsRef = firestore.collection('posts');\r\n\r\n\r\n    try {\r\n      const userPosts = await postsRef.get();\r\n      userPosts.forEach(doc => {\r\n        collectedPosts.push({title: doc.data().title,\r\n                              body: doc.data().body,\r\n                              owner_id: doc.data().owner_id,\r\n                              owner : doc.data().owner,\r\n                              date_created: doc.data().date_created,\r\n                              id: doc.id\r\n                            })\r\n      });\r\n      return collectedPosts;\r\n      } catch (error) {\r\n        console.error(\"Error fetching data\", error)\r\n      }\r\n    }\r\n  export const generateScore = async () => {\r\n    let allScores = [];\r\n    const scoresRef = firestore.collection('scores');\r\n    try {\r\n      const scores = await scoresRef.get();\r\n      scores.forEach(sc => {\r\n        allScores.push({\r\n          score: sc.data().score,\r\n          uid: sc.data().uid\r\n        });\r\n      });\r\n      return allScores;\r\n    } catch(error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  export const updateUserInterests = async (uid,interest) => {\r\n    if(!uid) return null;\r\n    const userRef = await firestore.doc(`users/${uid}`).update({interests:[...interest]})\r\n  }\r\n  export const updateUserProfilePicture = async (uid,picURL) => {\r\n    if(!uid) return null;\r\n    console.log(uid);\r\n    try {\r\n    const userRef = await firestore.doc(`users/${uid}`).update({photoURL:picURL});\r\n  }catch(e){\r\n    console.log(e)\r\n  }\r\n  }\r\n  export const updateUserRep = async (uid,rep) => {\r\n    if(!uid) return null;\r\n    console.log('success');\r\n    const userRef = await firestore.doc(`users/${uid}`).update({rep: rep});\r\n  }\r\n  export const updateUserDisplayName = async (uid,newDisplayName) => {\r\n    if(!uid) return null;\r\n    console.log(\"success\");\r\n    const userRef = await firestore.doc(`users/${uid}`).update({displayName: newDisplayName});\r\n  }\r\n"]},"metadata":{},"sourceType":"module"}