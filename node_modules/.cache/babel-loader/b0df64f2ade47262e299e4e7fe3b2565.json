{"ast":null,"code":"import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyBXlXcnnyTOWmI4SfdWPkpDOv6xfTlzG_0\",\n  authDomain: \"userdatabasepractice.firebaseapp.com\",\n  databaseURL: \"https://userdatabasepractice.firebaseio.com\",\n  projectId: \"userdatabasepractice\",\n  storageBucket: \"userdatabasepractice.appspot.com\",\n  messagingSenderId: \"418266214563\",\n  appId: \"1:418266214563:web:eb5e2878b6545093240f16\",\n  measurementId: \"G-B8CY4W80BN\"\n};\nfirebase.initializeApp(firebaseConfig);\nconst provider = new firebase.auth.GoogleAuthProvider();\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nexport default firebase;\nexport const session = firebase.auth.Auth.Persistence.SESSION;\nexport const local = firebase.auth.Auth.Persistence.LOCAL;\nexport const generateUserDocument = async (user, additionalData) => {\n  const userObj = { ...additionalData\n  };\n  if (!user) return;\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n\n  if (!snapshot.exists) {\n    const {\n      email,\n      password,\n      displayName,\n      photoURL\n    } = userObj;\n\n    try {\n      console.log(additionalData.displayName);\n      await userRef.set({ ...additionalData\n      });\n    } catch (error) {\n      console.error(\"Error creating user document\", error);\n    }\n  }\n\n  return getUserDocument(user.uid);\n};\nexport const getUserDocument = async uid => {\n  if (!uid) return null;\n\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n    console.log(userDocument.data());\n    return {\n      uid,\n      ...userDocument.data()\n    };\n  } catch (error) {\n    console.error(\"Error fetching data\", error);\n  }\n};\nexport const getAllUsers = async () => {\n  const usersRef = await firestore.collection('users');\n  let userNames = [];\n\n  try {\n    const userQuery = await usersRef.get();\n    userQuery.forEach(doc => {\n      userNames.push(doc.data().displayName);\n    });\n    return userNames;\n  } catch (e) {\n    console.log(e);\n  }\n};\nexport const generateNonUserPage = async userName => {\n  const usersRef = await firestore.collection(`users`);\n\n  try {\n    const queryRef = await usersRef.where('displayName', '==', `${userName}`).get();\n    let pageOwnerDoc;\n    queryRef.forEach(doc => {\n      pageOwnerDoc = {\n        displayName: doc.data().displayName,\n        interests: doc.data().interests,\n        aboutMe: doc.data().aboutMe,\n        photoURL: doc.data().photoURL,\n        email: doc.data().email\n      };\n    });\n    return pageOwnerDoc;\n  } catch (e) {\n    console.log(e);\n  }\n}; // generating posts\n\nexport const generateNewsPosts = async (justOwned = false) => {\n  let collectedPosts = [];\n  const postsRef = firestore.collection('posts');\n\n  try {\n    const userPosts = await postsRef.get();\n    userPosts.forEach(doc => {\n      collectedPosts.push({\n        title: doc.data().title,\n        body: doc.data().body,\n        owner_id: doc.data().owner_id,\n        owner: doc.data().owner,\n        date_created: doc.data().date_created,\n        id: doc.id\n      });\n    });\n    return collectedPosts;\n  } catch (error) {\n    console.error(\"Error fetching data\", error);\n  }\n};\nexport const generateScore = async () => {\n  let allScores = [];\n  const scoresRef = firestore.collection('scores');\n\n  try {\n    const scores = await scoresRef.get();\n    scores.forEach(sc => {\n      allScores.push({\n        score: sc.data().score,\n        uid: sc.data().uid\n      });\n    });\n    return allScores;\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const updateUserInterests = async (uid, interest) => {\n  if (!uid) return null;\n  const userRef = await firestore.doc(`users/${uid}`).update({\n    interests: [...interest]\n  });\n};\nexport const updateUserProfilePicture = async (uid, picURL) => {\n  if (!uid) return null;\n  console.log(\"successfull\" + picURL);\n  console.log(uid);\n\n  try {\n    const userRef = await firestore.doc(`users/${uid}`).update({\n      photoURL: picURL\n    });\n  } catch (e) {\n    console.log(e);\n  }\n};\nexport const updateUserRep = async (uid, rep) => {\n  if (!uid) return null;\n  console.log('success');\n  const userRef = await firestore.doc(`users/${uid}`).update({\n    rep: rep\n  });\n};\nexport const updateUserDisplayName = async (uid, newDisplayName) => {\n  if (!uid) return null;\n  console.log(\"success\");\n  const userRef = await firestore.doc(`users/${uid}`).update({\n    displayName: newDisplayName\n  });\n};","map":{"version":3,"sources":["C:/Users/Noah Wotring/Desktop/Code/portfolio/src/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","provider","auth","GoogleAuthProvider","signInWithGoogle","signInWithPopup","firestore","session","Auth","Persistence","SESSION","local","LOCAL","generateUserDocument","user","additionalData","userObj","userRef","doc","uid","snapshot","get","exists","email","password","displayName","photoURL","console","log","set","error","getUserDocument","userDocument","data","getAllUsers","usersRef","collection","userNames","userQuery","forEach","push","e","generateNonUserPage","userName","queryRef","where","pageOwnerDoc","interests","aboutMe","generateNewsPosts","justOwned","collectedPosts","postsRef","userPosts","title","body","owner_id","owner","date_created","id","generateScore","allScores","scoresRef","scores","sc","score","updateUserInterests","interest","update","updateUserProfilePicture","picURL","updateUserRep","rep","updateUserDisplayName","newDisplayName"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,oBAAP;AAEA,IAAIC,cAAc,GAAG;AACjBC,EAAAA,MAAM,EAAE,yCADS;AAEjBC,EAAAA,UAAU,EAAE,sCAFK;AAGjBC,EAAAA,WAAW,EAAE,6CAHI;AAIjBC,EAAAA,SAAS,EAAE,sBAJM;AAKjBC,EAAAA,aAAa,EAAE,kCALE;AAMjBC,EAAAA,iBAAiB,EAAE,cANF;AAOjBC,EAAAA,KAAK,EAAE,2CAPU;AAQjBC,EAAAA,aAAa,EAAE;AARE,CAArB;AAUAT,QAAQ,CAACU,aAAT,CAAuBT,cAAvB;AACA,MAAMU,QAAQ,GAAG,IAAIX,QAAQ,CAACY,IAAT,CAAcC,kBAAlB,EAAjB;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAM;AACpCF,EAAAA,IAAI,CAACG,eAAL,CAAqBJ,QAArB;AACD,CAFM;AAIP,OAAO,MAAMC,IAAI,GAAGZ,QAAQ,CAACY,IAAT,EAAb;AACP,OAAO,MAAMI,SAAS,GAAGhB,QAAQ,CAACgB,SAAT,EAAlB;AACP,eAAgBhB,QAAhB;AACA,OAAO,MAAMiB,OAAO,GAAGjB,QAAQ,CAACY,IAAT,CAAcM,IAAd,CAAmBC,WAAnB,CAA+BC,OAA/C;AACP,OAAO,MAAMC,KAAK,GAAIrB,QAAQ,CAACY,IAAT,CAAcM,IAAd,CAAmBC,WAAnB,CAA+BG,KAA9C;AAEP,OAAO,MAAMC,oBAAoB,GAAG,OAAOC,IAAP,EAAYC,cAAZ,KAA+B;AAC/D,QAAMC,OAAO,GAAG,EACd,GAAGD;AADW,GAAhB;AAGA,MAAG,CAACD,IAAJ,EAAU;AACV,QAAMG,OAAO,GAAGX,SAAS,CAACY,GAAV,CAAe,SAAQJ,IAAI,CAACK,GAAI,EAAhC,CAAhB;AACA,QAAMC,QAAQ,GAAG,MAAMH,OAAO,CAACI,GAAR,EAAvB;;AACA,MAAG,CAACD,QAAQ,CAACE,MAAb,EAAqB;AACnB,UAAM;AAACC,MAAAA,KAAD;AAAOC,MAAAA,QAAP;AAAgBC,MAAAA,WAAhB;AAA4BC,MAAAA;AAA5B,QAAwCV,OAA9C;;AACA,QAAI;AACFW,MAAAA,OAAO,CAACC,GAAR,CAAYb,cAAc,CAACU,WAA3B;AAEA,YAAMR,OAAO,CAACY,GAAR,CAAY,EAGhB,GAAGd;AAHa,OAAZ,CAAN;AAKD,KARD,CAQE,OAAOe,KAAP,EAAc;AACdH,MAAAA,OAAO,CAACG,KAAR,CAAc,8BAAd,EAA8CA,KAA9C;AACD;AACF;;AACD,SAAOC,eAAe,CAACjB,IAAI,CAACK,GAAN,CAAtB;AACD,CAtBI;AAuBL,OAAO,MAAMY,eAAe,GAAG,MAAMZ,GAAN,IAAa;AAC1C,MAAG,CAACA,GAAJ,EAAS,OAAO,IAAP;;AACT,MAAI;AAEF,UAAMa,YAAY,GAAG,MAAM1B,SAAS,CAACY,GAAV,CAAe,SAAQC,GAAI,EAA3B,EAA8BE,GAA9B,EAA3B;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYI,YAAY,CAACC,IAAb,EAAZ;AACA,WAAO;AACLd,MAAAA,GADK;AAEL,SAAGa,YAAY,CAACC,IAAb;AAFE,KAAP;AAID,GARD,CAQE,OAAOH,KAAP,EAAc;AACdH,IAAAA,OAAO,CAACG,KAAR,CAAc,qBAAd,EAAqCA,KAArC;AACD;AACF,CAbM;AAcP,OAAO,MAAMI,WAAW,GAAG,YAAY;AACrC,QAAMC,QAAQ,GAAG,MAAM7B,SAAS,CAAC8B,UAAV,CAAqB,OAArB,CAAvB;AACA,MAAIC,SAAS,GAAG,EAAhB;;AACA,MAAI;AACF,UAAMC,SAAS,GAAG,MAAMH,QAAQ,CAACd,GAAT,EAAxB;AACAiB,IAAAA,SAAS,CAACC,OAAV,CAAkBrB,GAAG,IAAI;AACvBmB,MAAAA,SAAS,CAACG,IAAV,CAAetB,GAAG,CAACe,IAAJ,GAAWR,WAA1B;AACD,KAFD;AAGA,WAAOY,SAAP;AACD,GAND,CAOA,OAAMI,CAAN,EAAQ;AACNd,IAAAA,OAAO,CAACC,GAAR,CAAYa,CAAZ;AACD;AACF,CAbM;AAcP,OAAO,MAAMC,mBAAmB,GAAG,MAAOC,QAAP,IAAoB;AACrD,QAAMR,QAAQ,GAAG,MAAM7B,SAAS,CAAC8B,UAAV,CAAsB,OAAtB,CAAvB;;AACA,MAAI;AAEF,UAAMQ,QAAQ,GAAG,MAAMT,QAAQ,CAACU,KAAT,CAAe,aAAf,EAA8B,IAA9B,EAAqC,GAAEF,QAAS,EAAhD,EAAmDtB,GAAnD,EAAvB;AAEA,QAAIyB,YAAJ;AACAF,IAAAA,QAAQ,CAACL,OAAT,CAAiBrB,GAAG,IAAI;AACtB4B,MAAAA,YAAY,GAAG;AACbrB,QAAAA,WAAW,EAAEP,GAAG,CAACe,IAAJ,GAAWR,WADX;AAEbsB,QAAAA,SAAS,EAAE7B,GAAG,CAACe,IAAJ,GAAWc,SAFT;AAGbC,QAAAA,OAAO,EAAE9B,GAAG,CAACe,IAAJ,GAAWe,OAHP;AAIbtB,QAAAA,QAAQ,EAAER,GAAG,CAACe,IAAJ,GAAWP,QAJR;AAKbH,QAAAA,KAAK,EAAEL,GAAG,CAACe,IAAJ,GAAWV;AALL,OAAf;AAQD,KATD;AAWA,WAAOuB,YAAP;AACD,GAjBD,CAiBC,OAAML,CAAN,EAAQ;AACPd,IAAAA,OAAO,CAACC,GAAR,CAAYa,CAAZ;AACD;AAGF,CAxBM,C,CAyBP;;AAEA,OAAO,MAAMQ,iBAAiB,GAAG,OAAOC,SAAS,GAAG,KAAnB,KAA6B;AAC5D,MAAIC,cAAc,GAAG,EAArB;AACA,QAAMC,QAAQ,GAAG9C,SAAS,CAAC8B,UAAV,CAAqB,OAArB,CAAjB;;AAGA,MAAI;AACF,UAAMiB,SAAS,GAAG,MAAMD,QAAQ,CAAC/B,GAAT,EAAxB;AACAgC,IAAAA,SAAS,CAACd,OAAV,CAAkBrB,GAAG,IAAI;AACvBiC,MAAAA,cAAc,CAACX,IAAf,CAAoB;AAACc,QAAAA,KAAK,EAAEpC,GAAG,CAACe,IAAJ,GAAWqB,KAAnB;AACEC,QAAAA,IAAI,EAAErC,GAAG,CAACe,IAAJ,GAAWsB,IADnB;AAEEC,QAAAA,QAAQ,EAAEtC,GAAG,CAACe,IAAJ,GAAWuB,QAFvB;AAGEC,QAAAA,KAAK,EAAGvC,GAAG,CAACe,IAAJ,GAAWwB,KAHrB;AAIEC,QAAAA,YAAY,EAAExC,GAAG,CAACe,IAAJ,GAAWyB,YAJ3B;AAKEC,QAAAA,EAAE,EAAEzC,GAAG,CAACyC;AALV,OAApB;AAOD,KARD;AASA,WAAOR,cAAP;AACC,GAZH,CAYI,OAAOrB,KAAP,EAAc;AACdH,IAAAA,OAAO,CAACG,KAAR,CAAc,qBAAd,EAAqCA,KAArC;AACD;AACF,CApBI;AAqBP,OAAO,MAAM8B,aAAa,GAAG,YAAY;AACvC,MAAIC,SAAS,GAAG,EAAhB;AACA,QAAMC,SAAS,GAAGxD,SAAS,CAAC8B,UAAV,CAAqB,QAArB,CAAlB;;AACA,MAAI;AACF,UAAM2B,MAAM,GAAG,MAAMD,SAAS,CAACzC,GAAV,EAArB;AACA0C,IAAAA,MAAM,CAACxB,OAAP,CAAeyB,EAAE,IAAI;AACnBH,MAAAA,SAAS,CAACrB,IAAV,CAAe;AACbyB,QAAAA,KAAK,EAAED,EAAE,CAAC/B,IAAH,GAAUgC,KADJ;AAEb9C,QAAAA,GAAG,EAAE6C,EAAE,CAAC/B,IAAH,GAAUd;AAFF,OAAf;AAID,KALD;AAMA,WAAO0C,SAAP;AACD,GATD,CASE,OAAM/B,KAAN,EAAa;AACbH,IAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD;AACF,CAfM;AAgBP,OAAO,MAAMoC,mBAAmB,GAAG,OAAO/C,GAAP,EAAWgD,QAAX,KAAwB;AACzD,MAAG,CAAChD,GAAJ,EAAS,OAAO,IAAP;AACT,QAAMF,OAAO,GAAG,MAAMX,SAAS,CAACY,GAAV,CAAe,SAAQC,GAAI,EAA3B,EAA8BiD,MAA9B,CAAqC;AAACrB,IAAAA,SAAS,EAAC,CAAC,GAAGoB,QAAJ;AAAX,GAArC,CAAtB;AACD,CAHM;AAIP,OAAO,MAAME,wBAAwB,GAAG,OAAOlD,GAAP,EAAWmD,MAAX,KAAsB;AAC5D,MAAG,CAACnD,GAAJ,EAAS,OAAO,IAAP;AACTQ,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgB0C,MAA5B;AACA3C,EAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;;AACA,MAAI;AACJ,UAAMF,OAAO,GAAG,MAAMX,SAAS,CAACY,GAAV,CAAe,SAAQC,GAAI,EAA3B,EAA8BiD,MAA9B,CAAqC;AAAC1C,MAAAA,QAAQ,EAAC4C;AAAV,KAArC,CAAtB;AACD,GAFC,CAED,OAAM7B,CAAN,EAAQ;AACPd,IAAAA,OAAO,CAACC,GAAR,CAAYa,CAAZ;AACD;AACA,CATM;AAUP,OAAO,MAAM8B,aAAa,GAAG,OAAOpD,GAAP,EAAWqD,GAAX,KAAmB;AAC9C,MAAG,CAACrD,GAAJ,EAAS,OAAO,IAAP;AACTQ,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,QAAMX,OAAO,GAAG,MAAMX,SAAS,CAACY,GAAV,CAAe,SAAQC,GAAI,EAA3B,EAA8BiD,MAA9B,CAAqC;AAACI,IAAAA,GAAG,EAAEA;AAAN,GAArC,CAAtB;AACD,CAJM;AAKP,OAAO,MAAMC,qBAAqB,GAAG,OAAOtD,GAAP,EAAWuD,cAAX,KAA8B;AACjE,MAAG,CAACvD,GAAJ,EAAS,OAAO,IAAP;AACTQ,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,QAAMX,OAAO,GAAG,MAAMX,SAAS,CAACY,GAAV,CAAe,SAAQC,GAAI,EAA3B,EAA8BiD,MAA9B,CAAqC;AAAC3C,IAAAA,WAAW,EAAEiD;AAAd,GAArC,CAAtB;AACD,CAJM","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyBXlXcnnyTOWmI4SfdWPkpDOv6xfTlzG_0\",\r\n    authDomain: \"userdatabasepractice.firebaseapp.com\",\r\n    databaseURL: \"https://userdatabasepractice.firebaseio.com\",\r\n    projectId: \"userdatabasepractice\",\r\n    storageBucket: \"userdatabasepractice.appspot.com\",\r\n    messagingSenderId: \"418266214563\",\r\n    appId: \"1:418266214563:web:eb5e2878b6545093240f16\",\r\n    measurementId: \"G-B8CY4W80BN\"\r\n  };\r\nfirebase.initializeApp(firebaseConfig);\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nexport const signInWithGoogle = () => {\r\n  auth.signInWithPopup(provider);\r\n};\r\n\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\nexport default  firebase;\r\nexport const session = firebase.auth.Auth.Persistence.SESSION;\r\nexport const local  = firebase.auth.Auth.Persistence.LOCAL;\r\n\r\nexport const generateUserDocument = async (user,additionalData) => {\r\n    const userObj = {\r\n      ...additionalData\r\n    }\r\n    if(!user) return;\r\n    const userRef = firestore.doc(`users/${user.uid}`);\r\n    const snapshot = await userRef.get();\r\n    if(!snapshot.exists) {\r\n      const {email,password,displayName,photoURL} = userObj;\r\n      try {\r\n        console.log(additionalData.displayName);\r\n\r\n        await userRef.set({\r\n\r\n\r\n          ...additionalData\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error creating user document\", error);\r\n      }\r\n    }\r\n    return getUserDocument(user.uid);\r\n  };\r\n  export const getUserDocument = async uid => {\r\n    if(!uid) return null;\r\n    try {\r\n\r\n      const userDocument = await firestore.doc(`users/${uid}`).get();\r\n      console.log(userDocument.data())\r\n      return {\r\n        uid,\r\n        ...userDocument.data()\r\n    };\r\n    } catch (error) {\r\n      console.error(\"Error fetching data\", error)\r\n    }\r\n  };\r\n  export const getAllUsers = async () => {\r\n    const usersRef = await firestore.collection('users');\r\n    let userNames = [];\r\n    try {\r\n      const userQuery = await usersRef.get();\r\n      userQuery.forEach(doc => {\r\n        userNames.push(doc.data().displayName)\r\n      })\r\n      return userNames\r\n    }\r\n    catch(e){\r\n      console.log(e);\r\n    }\r\n  }\r\n  export const generateNonUserPage = async (userName) => {\r\n    const usersRef = await firestore.collection(`users`);\r\n    try {\r\n\r\n      const queryRef = await usersRef.where('displayName', '==', `${userName}`).get();\r\n\r\n      let pageOwnerDoc;\r\n      queryRef.forEach(doc => {\r\n        pageOwnerDoc = {\r\n          displayName: doc.data().displayName,\r\n          interests: doc.data().interests,\r\n          aboutMe: doc.data().aboutMe,\r\n          photoURL: doc.data().photoURL,\r\n          email: doc.data().email\r\n\r\n        }\r\n      })\r\n\r\n      return pageOwnerDoc\r\n    }catch(e){\r\n      console.log(e);\r\n    }\r\n\r\n\r\n  }\r\n  // generating posts\r\n\r\n  export const generateNewsPosts = async (justOwned = false) => {\r\n    let collectedPosts = [];\r\n    const postsRef = firestore.collection('posts');\r\n\r\n\r\n    try {\r\n      const userPosts = await postsRef.get();\r\n      userPosts.forEach(doc => {\r\n        collectedPosts.push({title: doc.data().title,\r\n                              body: doc.data().body,\r\n                              owner_id: doc.data().owner_id,\r\n                              owner : doc.data().owner,\r\n                              date_created: doc.data().date_created,\r\n                              id: doc.id\r\n                            })\r\n      });\r\n      return collectedPosts;\r\n      } catch (error) {\r\n        console.error(\"Error fetching data\", error)\r\n      }\r\n    }\r\n  export const generateScore = async () => {\r\n    let allScores = [];\r\n    const scoresRef = firestore.collection('scores');\r\n    try {\r\n      const scores = await scoresRef.get();\r\n      scores.forEach(sc => {\r\n        allScores.push({\r\n          score: sc.data().score,\r\n          uid: sc.data().uid\r\n        });\r\n      });\r\n      return allScores;\r\n    } catch(error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  export const updateUserInterests = async (uid,interest) => {\r\n    if(!uid) return null;\r\n    const userRef = await firestore.doc(`users/${uid}`).update({interests:[...interest]})\r\n  }\r\n  export const updateUserProfilePicture = async (uid,picURL) => {\r\n    if(!uid) return null;\r\n    console.log(\"successfull\" + picURL);\r\n    console.log(uid);\r\n    try {\r\n    const userRef = await firestore.doc(`users/${uid}`).update({photoURL:picURL});\r\n  }catch(e){\r\n    console.log(e)\r\n  }\r\n  }\r\n  export const updateUserRep = async (uid,rep) => {\r\n    if(!uid) return null;\r\n    console.log('success');\r\n    const userRef = await firestore.doc(`users/${uid}`).update({rep: rep});\r\n  }\r\n  export const updateUserDisplayName = async (uid,newDisplayName) => {\r\n    if(!uid) return null;\r\n    console.log(\"success\");\r\n    const userRef = await firestore.doc(`users/${uid}`).update({displayName: newDisplayName});\r\n  }\r\n"]},"metadata":{},"sourceType":"module"}