{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\ReactUserDataPractice\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\ReactUserDataPractice\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\ReactUserDataPractice\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import NewsPost from'../components/NewsPost.js';import'./home.css';import{generateNewsPosts,firestore}from'../firebase.js';import{UserContext}from\"../providers/UserProvider\";var Home=function Home(){var user=useContext(UserContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],checkPosts=_useState2[1];var _useState3=useState(\" \"),_useState4=_slicedToArray(_useState3,2),potentialPost=_useState4[0],editPotentialPost=_useState4[1];var _useState5=useState(\" \"),_useState6=_slicedToArray(_useState5,2),potentialPostTitle=_useState6[0],editPotentialPostTitle=_useState6[1];var onChangeHandler=function onChangeHandler(event){if(event.target.id===\"potentialPostText\"){editPotentialPost(event.target.value);console.log(potentialPost);}if(event.target.id===\"potentialPostTitle\"){editPotentialPostTitle(event.target.value);}};//\n//submitting new post\nvar submitNewPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(postTitle,postBody){var endId,owner_id,owner,postData,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:endId=posts.length+1;owner_id=user?user.uid:null;owner=user?user.displayName:null;postData={owner_id:owner_id,title:postTitle,body:postBody,owner:user.name};console.log(postData);_context.prev=5;_context.next=8;return firestore.collection('/posts/').doc(\"\".concat(endId)).set({owner_id:owner_id,owner:owner,title:postTitle,body:postBody,date_created:new Date()});case 8:res=_context.sent;return _context.abrupt(\"return\");case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);alert('failure with'+postData.owner+postData.owner_id+postData.title+postData.body);case 15:case\"end\":return _context.stop();}}},_callee,null,[[5,12]]);}));return function submitNewPost(_x,_x2){return _ref.apply(this,arguments);};}();var checkForPosts=function checkForPosts(){generateNewsPosts().then(function(result){return checkPosts(result);});};useEffect(checkForPosts,[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"ml-16 relative container border inline-block bg-gray-100 bg-opacity-25 \"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-center text-5xl mt-3 font-semibold\"},\" News and Discussion Page\"),/*#__PURE__*/React.createElement(\"div\",{className:\"container news_post_container mx-auto md:w-10/12  opacity-75 box item-center \"},posts.sort(function(a,b){return a.date_created-b.date_created;}).map(function(post){return/*#__PURE__*/React.createElement(NewsPost,{body:post.body,title:post.title,owner_id:post.owner_id,owner:post.owner,date:post.date_created});}),/*#__PURE__*/React.createElement(\"div\",{className:\"submitPost container block bg-grey-600 rounded-lg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form block flex box-content w-half\"},/*#__PURE__*/React.createElement(\"div\",{className:\"center_block m-auto w-half\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-center my-5\"},\" Submit a New Post \"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"labelinputblock label_block inline-block\"},/*#__PURE__*/React.createElement(\"label\",{className:\"\"},\" Title \",\" \",\" \"),/*#__PURE__*/React.createElement(\"input\",{className:\"title_draft\",onChange:function onChange(event){return onChangeHandler(event);},id:\"potentialPostTitle\"})),/*#__PURE__*/React.createElement(\"br\",null),\" \",/*#__PURE__*/React.createElement(\"br\",null),\" \",/*#__PURE__*/React.createElement(\"textarea\",{className:\"post_draft block\",value:potentialPost,id:\"potentialPostText\",onChange:function onChange(event){return onChangeHandler(event);}}),/*#__PURE__*/React.createElement(\"button\",{className:\"block float-right m-3 shadow  \",onClick:function onClick(){return submitNewPost(potentialPostTitle,potentialPost);}},\" Submit \")))))));};export default Home;","map":{"version":3,"sources":["C:/Users/Noah Wotring/Desktop/Code/ReactUserDataPractice/my-app/src/pages/News.js"],"names":["React","useContext","useState","useEffect","NewsPost","generateNewsPosts","firestore","UserContext","Home","user","posts","checkPosts","potentialPost","editPotentialPost","potentialPostTitle","editPotentialPostTitle","onChangeHandler","event","target","id","value","console","log","submitNewPost","postTitle","postBody","endId","length","owner_id","uid","owner","displayName","postData","title","body","name","collection","doc","set","date_created","Date","res","alert","checkForPosts","then","result","sort","a","b","map","post"],"mappings":"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","sourcesContent":["import React, {useContext,useState, useEffect} from 'react';\r\nimport NewsPost from '../components/NewsPost.js';\r\nimport './home.css';\r\nimport {generateNewsPosts,firestore} from  '../firebase.js'\r\nimport {UserContext} from \"../providers/UserProvider\";\r\n\r\nconst Home = () => {\r\n  const user = useContext(UserContext);\r\n  const[posts,checkPosts] = useState([]);\r\n  const [potentialPost,editPotentialPost] = useState(\" \");\r\n  const [potentialPostTitle,editPotentialPostTitle] = useState(\" \");\r\n\r\n\r\n  const onChangeHandler = (event) => {\r\n    if(event.target.id === \"potentialPostText\"){\r\n      editPotentialPost(event.target.value);\r\n      console.log(potentialPost);\r\n    }\r\n    if(event.target.id === \"potentialPostTitle\"){\r\n      editPotentialPostTitle(event.target.value)\r\n    }\r\n  }\r\n\r\n //\r\n\r\n    //submitting new post\r\n    const submitNewPost = async (postTitle,postBody) => {\r\n      var endId = posts.length + 1;\r\n      var owner_id = user? user.uid : null;\r\n      var owner = user? user.displayName : null;\r\n      var postData = {\r\n        owner_id: owner_id,\r\n        title: postTitle,\r\n        body: postBody,\r\n        owner: user.name,\r\n      };\r\n      console.log(postData);\r\n\r\n      try {\r\n      const res = await firestore.collection('/posts/').doc(`${endId}`).set({\r\n        owner_id: owner_id,\r\n        owner: owner,\r\n        title: postTitle,\r\n        body: postBody,\r\n        date_created: new Date()\r\n\r\n\r\n      });\r\n      return\r\n    } catch {\r\n      alert('failure with' + postData.owner + postData.owner_id + postData.title + postData.body)\r\n    }\r\n    }\r\n\r\n    const checkForPosts = () => {\r\n      generateNewsPosts().then(result => checkPosts(result));\r\n    }\r\n    useEffect(checkForPosts,[])\r\n\r\n    return (\r\n\r\n\r\n      <div className=\"ml-16 relative container border inline-block bg-gray-100 bg-opacity-25 \" >\r\n        <h1 className=\"text-center text-5xl mt-3 font-semibold\"> News and Discussion Page</h1>\r\n        <div className=\"container news_post_container mx-auto md:w-10/12  opacity-75 box item-center \">\r\n          {posts.sort((a,b) => {return a.date_created-b.date_created}).map((post) => <NewsPost body={post.body} title={post.title} owner_id={post.owner_id} owner={post.owner} date={post.date_created} />)}\r\n          <div className=\"submitPost container block bg-grey-600 rounded-lg\">\r\n            <div className=\"form block flex box-content w-half\">\r\n            <div className=\"center_block m-auto w-half\">\r\n              <h3 className=\"text-center my-5\"> Submit a New Post </h3>\r\n\r\n              <form>\r\n                <div className=\"labelinputblock label_block inline-block\">\r\n                  <label className=\"\"> Title {\" \"} </label>\r\n                  <input\r\n                    className=\"title_draft\"\r\n                    onChange={(event) => onChangeHandler(event)}\r\n                    id=\"potentialPostTitle\"\r\n                  />\r\n                </div>\r\n                <br /> <br />{\" \"}\r\n                <textarea\r\n                  className=\"post_draft block\"\r\n                  value={potentialPost}\r\n                  id=\"potentialPostText\"\r\n                  onChange={((event) => onChangeHandler(event))}\r\n                  />\r\n                  <button className=\"block float-right m-3 shadow  \" onClick={() => submitNewPost(potentialPostTitle,potentialPost)}> Submit </button>\r\n                </form>\r\n                </div>\r\n              </div>\r\n           </div>\r\n\r\n         </div>\r\n\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}