{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import NewsPost from'../components/NewsPost.js';import{generateNewsPosts,firestore}from'../firebase.js';import{UserContext}from\"../providers/UserProvider\";import'./css/news.css';var News=function News(){var user=useContext(UserContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],checkPosts=_useState2[1];var _useState3=useState(\" \"),_useState4=_slicedToArray(_useState3,2),potentialPost=_useState4[0],editPotentialPost=_useState4[1];var _useState5=useState(\" \"),_useState6=_slicedToArray(_useState5,2),potentialPostTitle=_useState6[0],editPotentialPostTitle=_useState6[1];var timeConverter=function timeConverter(UNIX_timestamp){var a=new Date(UNIX_timestamp*1000);var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var year=a.getFullYear();var month=months[a.getMonth()];var date=a.getDate();var hour=a.getHours();var min=a.getMinutes();var sec=a.getSeconds();var time=date+' '+month+' '+year+' '+hour+':'+min+':'+sec;return time;};var sortByPersonFirst=function sortByPersonFirst(a,b){return a.owner>b.owner?1:-1;};var sortByDateFirst=function sortByDateFirst(a,b){return b.date_created-a.date_created;};var sortByDateLast=function sortByDateLast(a,b){return b.date_created>a.date_created?-1:1;};var onChangeHandler=function onChangeHandler(event){if(event.target.id===\"potentialPostText\"){editPotentialPost(event.target.value);console.log(potentialPost);}if(event.target.id===\"potentialPostTitle\"){editPotentialPostTitle(event.target.value);}};//\n//submitting new post\nvar submitNewPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(postTitle,postBody){var endId,owner_id,owner,date,postData,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:endId=posts.length+1;owner_id=user?user.uid:null;owner=user?user.displayName:null;date=new Date();alert(date);postData={owner_id:owner_id,title:postTitle,body:postBody,owner:owner,date_created:date};alert(postData.date);_context.prev=7;_context.next=10;return firestore.collection('/posts/').doc(\"\".concat(endId)).set({owner_id:owner_id,owner:owner,title:postTitle,body:postBody,date_created:new Date()});case 10:res=_context.sent;return _context.abrupt(\"return\");case 14:_context.prev=14;_context.t0=_context[\"catch\"](7);alert('failure with'+postData.owner+postData.owner_id+postData.title+postData.body);case 17:case\"end\":return _context.stop();}}},_callee,null,[[7,14]]);}));return function submitNewPost(_x,_x2){return _ref.apply(this,arguments);};}();var checkForPosts=function checkForPosts(){generateNewsPosts().then(function(result){return checkPosts(result);});};useEffect(checkForPosts,[]);var revealSearchOptions=function revealSearchOptions(){var list=document.querySelector('ul.searchList');list.classList.toggle('seeMe');console.log(list);};var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),postNum=_useState8[0],addPostNum=_useState8[1];var x=0;return/*#__PURE__*/React.createElement(\"div\",{className:\" relative pt-8 text-center block rounded-sm main  \"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-center text-6xl mt-3 mb-8  font-semibold newsH1\"},\" What's the \",/*#__PURE__*/React.createElement(\"span\",{className:\"italic\"},\" Gossip ?  \")),/*#__PURE__*/React.createElement(\"div\",{className:\" news_post_container mx-auto w-12/12 md:w-12/12 mt-8 opacity-75 box item-center \"},posts.sort(function(a,b){return sortByDateLast(a,b);}).map(function(post){return/*#__PURE__*/React.createElement(NewsPost,{postNum:x+=1,body:post.body,title:post.title,id:post.id,owner_id:post.owner_id,owner:post.owner,date_created:timeConverter(post.date_created.seconds)});}),/*#__PURE__*/React.createElement(\"div\",{className:\"submitPost container block bg-grey-600 rounded-lg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form block flex box-content w-half\"},/*#__PURE__*/React.createElement(\"div\",{className:\"center_block m-auto w-half\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-center my-5\"},\" Submit a New Post \"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"labelinputblock label_block inline-block\"},/*#__PURE__*/React.createElement(\"label\",{className:\"\"},\" Title \",\" \",\" \"),/*#__PURE__*/React.createElement(\"input\",{className:\"title_draft\",onChange:function onChange(event){return onChangeHandler(event);},id:\"potentialPostTitle\"})),/*#__PURE__*/React.createElement(\"br\",null),\" \",/*#__PURE__*/React.createElement(\"br\",null),\" \",/*#__PURE__*/React.createElement(\"textarea\",{className:\"post_draft block\",value:potentialPost,id:\"potentialPostText\",onChange:function onChange(event){return onChangeHandler(event);}}),/*#__PURE__*/React.createElement(\"button\",{className:\"block float-right m-3 shadow  \",onClick:function onClick(){return submitNewPost(potentialPostTitle,potentialPost);}},\" Submit \")))))));};export default News;","map":{"version":3,"sources":["C:/Users/Noah Wotring/Desktop/Code/portfolio/src/pages/News.js"],"names":["React","useContext","useState","useEffect","NewsPost","generateNewsPosts","firestore","UserContext","News","user","posts","checkPosts","potentialPost","editPotentialPost","potentialPostTitle","editPotentialPostTitle","timeConverter","UNIX_timestamp","a","Date","months","year","getFullYear","month","getMonth","date","getDate","hour","getHours","min","getMinutes","sec","getSeconds","time","sortByPersonFirst","b","owner","sortByDateFirst","date_created","sortByDateLast","onChangeHandler","event","target","id","value","console","log","submitNewPost","postTitle","postBody","endId","length","owner_id","uid","displayName","alert","postData","title","body","collection","doc","set","res","checkForPosts","then","result","revealSearchOptions","list","document","querySelector","classList","toggle","postNum","addPostNum","x","sort","map","post","seconds"],"mappings":"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","sourcesContent":["import React, {useContext,useState, useEffect} from 'react';\r\nimport NewsPost from '../components/NewsPost.js';\r\nimport {generateNewsPosts,firestore} from  '../firebase.js'\r\nimport {UserContext} from \"../providers/UserProvider\";\r\nimport './css/news.css'\r\n\r\nconst News = () => {\r\n  const user = useContext(UserContext);\r\n  const[posts,checkPosts] = useState([]);\r\n  const [potentialPost,editPotentialPost] = useState(\" \");\r\n  const [potentialPostTitle,editPotentialPostTitle] = useState(\" \");\r\n\r\n  const timeConverter = (UNIX_timestamp) => {\r\n    var a = new Date(UNIX_timestamp * 1000);\r\n    var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\r\n    var year = a.getFullYear();\r\n    var month = months[a.getMonth()];\r\n    var date = a.getDate();\r\n    var hour = a.getHours();\r\n    var min = a.getMinutes();\r\n    var sec = a.getSeconds();\r\n    var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec ;\r\n    return time;\r\n  }\r\n\r\n  const sortByPersonFirst = (a,b) => {  return  a.owner > b.owner ? 1 : -1};\r\n  const sortByDateFirst = (a,b) => {return b.date_created-a.date_created};\r\n  const sortByDateLast = (a,b) => {return b.date_created > a.date_created ? -1 : 1};\r\n\r\n\r\n\r\n\r\n  const onChangeHandler = (event) => {\r\n    if(event.target.id === \"potentialPostText\"){\r\n      editPotentialPost(event.target.value);\r\n      console.log(potentialPost);\r\n    }\r\n    if(event.target.id === \"potentialPostTitle\"){\r\n      editPotentialPostTitle(event.target.value)\r\n    }\r\n  }\r\n\r\n //\r\n\r\n    //submitting new post\r\n    const submitNewPost = async (postTitle,postBody) => {\r\n      var endId = posts.length + 1;\r\n      var owner_id = user? user.uid : null;\r\n      var owner = user? user.displayName : null;\r\n      var date = new Date();\r\n      alert(date)\r\n      var postData = {\r\n        owner_id: owner_id,\r\n        title: postTitle,\r\n        body: postBody,\r\n        owner: owner,\r\n        date_created: date\r\n      };\r\n      alert(postData.date);\r\n\r\n\r\n      try {\r\n      const res = await firestore.collection('/posts/').doc(`${endId}`).set({\r\n        owner_id: owner_id,\r\n        owner: owner,\r\n        title: postTitle,\r\n        body: postBody,\r\n        date_created: new Date()\r\n\r\n\r\n      });\r\n      return\r\n    } catch {\r\n      alert('failure with' + postData.owner + postData.owner_id + postData.title + postData.body)\r\n    }\r\n    }\r\n\r\n    const checkForPosts = () => {\r\n      generateNewsPosts().then(result => checkPosts(result));\r\n    }\r\n    useEffect(checkForPosts,[])\r\n\r\n    const revealSearchOptions = () => {\r\n\r\n      let list = document.querySelector('ul.searchList');\r\n      list.classList.toggle('seeMe');\r\n      console.log(list)\r\n    }\r\n    const [postNum, addPostNum] = useState(0)\r\n    let x = 0;\r\n\r\n    return (\r\n\r\n\r\n      <div className=\" relative pt-8 text-center block rounded-sm main  \" >\r\n        <h1 className=\"text-center text-6xl mt-3 mb-8  font-semibold newsH1\"> What's the <span className=\"italic\"> Gossip ?  </span></h1>\r\n        {/*\r\n        <button type=\"button\" onClick={() => revealSearchOptions()} > Search Button </button>\r\n        <ul className=\"searchList \">\r\n          <li>title-ascending </li><br />\r\n          <li>title-descending</li><br /> (a,b) => {return b.date_created-a.date_created}\r\n        </ul>\r\n        */}\r\n\r\n        <div className=\" news_post_container mx-auto w-12/12 md:w-12/12 mt-8 opacity-75 box item-center \">\r\n          {posts.sort((a,b) => sortByDateLast(a,b)).map((post) => <NewsPost postNum={x+=1} body={post.body} title={post.title} id={post.id} owner_id={post.owner_id} owner={post.owner} date_created={timeConverter(post.date_created.seconds)} />)}\r\n          <div className=\"submitPost container block bg-grey-600 rounded-lg\">\r\n            <div className=\"form block flex box-content w-half\">\r\n            <div className=\"center_block m-auto w-half\">\r\n              <h3 className=\"text-center my-5\"> Submit a New Post </h3>\r\n\r\n              <form>\r\n                <div className=\"labelinputblock label_block inline-block\">\r\n                  <label className=\"\"> Title {\" \"} </label>\r\n                  <input\r\n                    className=\"title_draft\"\r\n                    onChange={(event) => onChangeHandler(event)}\r\n                    id=\"potentialPostTitle\"\r\n                  />\r\n                </div>\r\n                <br /> <br />{\" \"}\r\n                <textarea\r\n                  className=\"post_draft block\"\r\n                  value={potentialPost}\r\n                  id=\"potentialPostText\"\r\n                  onChange={((event) => onChangeHandler(event))}\r\n                  />\r\n                  <button className=\"block float-right m-3 shadow  \" onClick={() => submitNewPost(potentialPostTitle,potentialPost)}> Submit </button>\r\n                </form>\r\n                </div>\r\n              </div>\r\n           </div>\r\n\r\n         </div>\r\n\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\nexport default News;\r\n"]},"metadata":{},"sourceType":"module"}