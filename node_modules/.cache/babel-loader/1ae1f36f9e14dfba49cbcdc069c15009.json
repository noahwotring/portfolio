{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\ReactUserDataPractice\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\ReactUserDataPractice\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\Users\\\\Noah Wotring\\\\Desktop\\\\Code\\\\ReactUserDataPractice\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import firebase from\"firebase/app\";import\"firebase/auth\";import\"firebase/firestore\";var firebaseConfig={apiKey:\"AIzaSyBXlXcnnyTOWmI4SfdWPkpDOv6xfTlzG_0\",authDomain:\"userdatabasepractice.firebaseapp.com\",databaseURL:\"https://userdatabasepractice.firebaseio.com\",projectId:\"userdatabasepractice\",storageBucket:\"userdatabasepractice.appspot.com\",messagingSenderId:\"418266214563\",appId:\"1:418266214563:web:eb5e2878b6545093240f16\",measurementId:\"G-B8CY4W80BN\"};firebase.initializeApp(firebaseConfig);var provider=new firebase.auth.GoogleAuthProvider();export var signInWithGoogle=function signInWithGoogle(){auth.signInWithPopup(provider);};export var auth=firebase.auth();export var firestore=firebase.firestore();export default firebase;export var session=firebase.auth.Auth.Persistence.SESSION;export var local=firebase.auth.Auth.Persistence.LOCAL;export var generateUserDocument=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user,additionalData){var userRef,snapshot,email,displayName,photoURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(user){_context.next=2;break;}return _context.abrupt(\"return\");case 2:userRef=firestore.doc(\"users/\".concat(user.uid));_context.next=5;return userRef.get();case 5:snapshot=_context.sent;if(snapshot.exists){_context.next=17;break;}email=user.email,displayName=user.displayName,photoURL=user.photoURL;_context.prev=8;_context.next=11;return userRef.set(_objectSpread({user:user,email:email,photoURL:photoURL},additionalData));case 11:console.log(displayName);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](8);console.error(\"Error creating user document\",_context.t0);case 17:return _context.abrupt(\"return\",getUserDocument(user.uid));case 18:case\"end\":return _context.stop();}}},_callee,null,[[8,14]]);}));return function generateUserDocument(_x,_x2){return _ref.apply(this,arguments);};}();export var getUserDocument=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(uid){var userDocument;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(uid){_context2.next=2;break;}return _context2.abrupt(\"return\",null);case 2:_context2.prev=2;_context2.next=5;return firestore.doc(\"users/\".concat(uid)).get();case 5:userDocument=_context2.sent;return _context2.abrupt(\"return\",_objectSpread({uid:uid},userDocument.data()));case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.error(\"Error fetching data\",_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function getUserDocument(_x3){return _ref2.apply(this,arguments);};}();export var generateNewsPosts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var justOwned,collectedPosts,postsRef,userPosts,_args3=arguments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:justOwned=_args3.length>0&&_args3[0]!==undefined?_args3[0]:false;collectedPosts=[];postsRef=firestore.collection('posts');_context3.prev=3;_context3.next=6;return postsRef.get();case 6:userPosts=_context3.sent;userPosts.forEach(function(doc){collectedPosts.push({title:doc.data().title,body:doc.data().body,owner_id:doc.data().owner_id,owner:doc.data().owner,date:doc.data().date_created,id:doc.id});});return _context3.abrupt(\"return\",collectedPosts);case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](3);console.error(\"Error fetching data\",_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[3,11]]);}));return function generateNewsPosts(){return _ref3.apply(this,arguments);};}();export var generateScore=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var allScores,scoresRef,scores;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:allScores=[];scoresRef=firestore.collection('scores');_context4.prev=2;_context4.next=5;return scoresRef.get();case 5:scores=_context4.sent;scores.forEach(function(sc){allScores.push({score:sc.data().score,uid:sc.data().uid});});return _context4.abrupt(\"return\",allScores);case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);console.log(_context4.t0);case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[2,10]]);}));return function generateScore(){return _ref4.apply(this,arguments);};}();export var updateUserProfilePicture=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(uid,picURL){var userRef;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(uid){_context5.next=2;break;}return _context5.abrupt(\"return\",null);case 2:console.log(\"successfull\");_context5.next=5;return firestore.doc(\"users/\".concat(uid)).update({photoURL:picURL});case 5:userRef=_context5.sent;case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function updateUserProfilePicture(_x4,_x5){return _ref5.apply(this,arguments);};}();export var updateUserDisplayName=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(uid,newDisplayName){var userRef;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(uid){_context6.next=2;break;}return _context6.abrupt(\"return\",null);case 2:console.log(\"success\");_context6.next=5;return firestore.doc(\"users/\".concat(uid)).update({displayName:newDisplayName});case 5:userRef=_context6.sent;case 6:case\"end\":return _context6.stop();}}},_callee6);}));return function updateUserDisplayName(_x6,_x7){return _ref6.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/Users/Noah Wotring/Desktop/Code/ReactUserDataPractice/my-app/src/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","provider","auth","GoogleAuthProvider","signInWithGoogle","signInWithPopup","firestore","session","Auth","Persistence","SESSION","local","LOCAL","generateUserDocument","user","additionalData","userRef","doc","uid","get","snapshot","exists","email","displayName","photoURL","set","console","log","error","getUserDocument","userDocument","data","generateNewsPosts","justOwned","collectedPosts","postsRef","collection","userPosts","forEach","push","title","body","owner_id","owner","date","date_created","id","generateScore","allScores","scoresRef","scores","sc","score","updateUserProfilePicture","picURL","update","updateUserDisplayName","newDisplayName"],"mappings":"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","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyBXlXcnnyTOWmI4SfdWPkpDOv6xfTlzG_0\",\r\n    authDomain: \"userdatabasepractice.firebaseapp.com\",\r\n    databaseURL: \"https://userdatabasepractice.firebaseio.com\",\r\n    projectId: \"userdatabasepractice\",\r\n    storageBucket: \"userdatabasepractice.appspot.com\",\r\n    messagingSenderId: \"418266214563\",\r\n    appId: \"1:418266214563:web:eb5e2878b6545093240f16\",\r\n    measurementId: \"G-B8CY4W80BN\"\r\n  };\r\nfirebase.initializeApp(firebaseConfig);\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nexport const signInWithGoogle = () => {\r\n  auth.signInWithPopup(provider);\r\n};\r\n\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\nexport default  firebase;\r\nexport const session = firebase.auth.Auth.Persistence.SESSION;\r\nexport const local  = firebase.auth.Auth.Persistence.LOCAL;\r\n\r\nexport const generateUserDocument = async (user,additionalData) => {\r\n    if(!user) return;\r\n    const userRef = firestore.doc(`users/${user.uid}`);\r\n    const snapshot = await userRef.get();\r\n    if(!snapshot.exists) {\r\n      const {email,displayName,photoURL} = user;\r\n      try {\r\n        await userRef.set({\r\n          user,\r\n          email,\r\n          photoURL,\r\n          ...additionalData\r\n        });\r\n        console.log(displayName);\r\n      } catch (error) {\r\n        console.error(\"Error creating user document\", error);\r\n      }\r\n    }\r\n    return getUserDocument(user.uid);\r\n  };\r\n  export const getUserDocument = async uid => {\r\n    if(!uid) return null;\r\n    try {\r\n      const userDocument = await firestore.doc(`users/${uid}`).get();\r\n      return {\r\n        uid,\r\n        ...userDocument.data()\r\n    };\r\n    } catch (error) {\r\n      console.error(\"Error fetching data\", error)\r\n    }\r\n  };\r\n\r\n  export const generateNewsPosts = async (justOwned = false) => {\r\n    let collectedPosts = [];\r\n    const postsRef = firestore.collection('posts');\r\n\r\n\r\n    try {\r\n      const userPosts = await postsRef.get();\r\n      userPosts.forEach(doc => {\r\n        collectedPosts.push({title: doc.data().title,\r\n                              body: doc.data().body,\r\n                              owner_id: doc.data().owner_id,\r\n                              owner : doc.data().owner,\r\n                              date: doc.data().date_created,\r\n                              id: doc.id\r\n                            })\r\n      });\r\n      return collectedPosts;\r\n      } catch (error) {\r\n        console.error(\"Error fetching data\", error)\r\n      }\r\n    }\r\n  export const generateScore = async () => {\r\n    let allScores = [];\r\n    const scoresRef = firestore.collection('scores');\r\n    try {\r\n      const scores = await scoresRef.get();\r\n      scores.forEach(sc => {\r\n        allScores.push({\r\n          score: sc.data().score,\r\n          uid: sc.data().uid\r\n        });\r\n      });\r\n      return allScores;\r\n    } catch(error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  export const updateUserProfilePicture = async (uid,picURL) => {\r\n    if(!uid) return null;\r\n    console.log(\"successfull\");\r\n    const userRef = await firestore.doc(`users/${uid}`).update({photoURL:picURL});\r\n  }\r\n  export const updateUserDisplayName = async (uid,newDisplayName) => {\r\n    if(!uid) return null;\r\n    console.log(\"success\");\r\n    const userRef = await firestore.doc(`users/${uid}`).update({displayName: newDisplayName});\r\n  }\r\n"]},"metadata":{},"sourceType":"module"}